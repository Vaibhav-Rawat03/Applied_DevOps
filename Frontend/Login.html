<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TO-DO</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom CSS -->
  <style>
    /* Dark mode styles */
    body {
      background-color: #343a40;
      color: #ffffff;
    }
  </style>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
</head>

<body>

  <section class="vh-100">
    <div class="container py-5 h-100">
      <div class="row d-flex align-items-center justify-content-center h-100">
        <div class="col-md-8 col-lg-7 col-xl-6">
          <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.svg" class="img-fluid"
            alt="Phone image">
        </div>
        <div class="col-md-7 col-lg-5 col-xl-5 offset-xl-1">
          <form >
            <!-- Email input -->
            <div class="form-outline mb-4">
              <input type="email" id="form1Example13" class="form-control form-control-lg" />
              <label class="form-label" for="form1Example13">Email address</label>
            </div>

            <!-- Password input -->
            <div class="form-outline mb-4">
              <input type="password" id="form1Example23" class="form-control form-control-lg" />
              <label class="form-label" for="form1Example23">Password</label>
            </div>

            <div class="my-4">
              <a href="Signup.html">New User?</a>
            </div>

            <!-- Submit button -->
            <button type="button" class="btn btn-primary btn-lg btn-block" id="login">Sign in</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function authenticatebuyer() {
      // e.preventDefault()
      const email = document.getElementById('form1Example13').value
      const password = document.getElementById('form1Example23').value
      console.log(email + password)
      if (email == "" || password == "") {
        alert('Hacker bhay Hacker')
        return
      }
      else {
        const secure = {
          email: email,
          password: password,
        }

        fetch('/confirm_login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(secure)
        }).then(response =>{
          if(response.status===200){
            window.location.href = './index.html';
          }
          else{
            return response.json()
            console.log(response.json());
          }
        }).then(data=>{
          console.log(data);
        }).catch(error=>{
          console.log(error);
          alert("An unexpected error occured");
        });
      }
    }

    document.getElementById('login').addEventListener("click" , authenticatebuyer)
  </script>
</body>

</html>